(window.webpackJsonp=window.webpackJsonp||[]).push([[88],{402:function(a,s,t){"use strict";t.r(s);var e=t(14),n=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"apk"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#apk"}},[a._v("#")]),a._v(" apk")]),a._v(" "),s("p",[a._v("Alpine Linux 下的包管理工具")]),a._v(" "),s("h2",{attrs:{id:"使用实例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用实例"}},[a._v("#")]),a._v(" 使用实例")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("apk "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" xxx\napk search xxx "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 支持正则")]),a._v("\napk info xxx "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看包的详细信息")]),a._v("\napk show "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# list local package")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 卸载并删除 包")]),a._v("\napk del openssh openntp "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v("\n")])])]),s("h3",{attrs:{id:"升级"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#升级"}},[a._v("#")]),a._v(" 升级")]),a._v(" "),s("p",[a._v("upgrade命令升级系统已安装的所以软件包（一般包括内核），当然也可指定仅升级部分软件包（通过-u或–upgrade选择指定）。")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("apk update "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 更新最新本地镜像源")]),a._v("\napk upgrade "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 升级软件")]),a._v("\napk "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--upgrade")]),a._v(" busybox "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 指定升级部分软件包")]),a._v("\n")])])]),s("h3",{attrs:{id:"搜索"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#搜索"}},[a._v("#")]),a._v(" 搜索")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("apk search "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查找所以可用软件包")]),a._v("\napk search "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查找所以可用软件包及其描述内容")]),a._v("\napk search "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'acf*'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 通过软件包名称查找软件包")]),a._v("\napk search "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'docker'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 通过描述文件查找特定的软件包")]),a._v("\n")])])]),s("h3",{attrs:{id:"查看包信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看包信息"}},[a._v("#")]),a._v(" 查看包信息")]),a._v(" "),s("p",[a._v("info命令用于显示软件包的信息。")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("apk info "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 列出所有已安装的软件包")]),a._v("\napk info "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-a")]),a._v(" zlib "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 显示完整的软件包信息")]),a._v("\napk info --who-owns /sbin/lbu "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 显示指定文件属于的包")]),a._v("\n")])])]),s("h2",{attrs:{id:"笔记"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#笔记"}},[a._v("#")]),a._v(" 笔记")]),a._v(" "),s("p",[a._v("还是蛮喜欢 alpine 的，简单纯粹")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("apk "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" iproute2 "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ss vs netstat")]),a._v("\nss "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ptl")]),a._v("\napk "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" drill "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# drill vs nslookup&dig")]),a._v("\n\ncrond "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 开启 cron 服务")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("crontab")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-l")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v("\n\napk "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" xxx\napk search "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" xxx\napk info "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-a")]),a._v(" xxx\napk info\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"http://mirrors.aliyun.com/alpine/v3.6/main'),s("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[a._v("\\n")]),a._v('http://mirrors.aliyun.com/alpine/v3.6/community"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" /etc/apk/repositories\napk update\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# storage")]),a._v("\nibu "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# alpine local backup")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# network")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"shortname"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" /etc/hostname\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("hostname")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-F")]),a._v(" /etc/hostname\n/etc/hosts\n/etc/resolv.conf "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# conig DNS")]),a._v("\nmodprobe ipv6 "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# enable ipv6")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"ipv6"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">>")]),a._v(" /etc/modules\niface "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# config interface")]),a._v("\napk "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" iptables ip6tables iptables-doc\n/etc/init.d/networking restart "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# activate change")]),a._v("\napke "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" iputils "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# IPv6 traceroute")]),a._v("\ntraceroute6 ipv6.google.com\nawall "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# alpine wall")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# setup a openvpn server")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# post-install")]),a._v("\n/etc/apk/repositories\napk "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" cherokee --update-cache "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--repository")]),a._v(" http://dl-3.alpinelinux.org/alpine/edge/testing/ --allow-untrusted\napk search "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--description")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NTP'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# show description and search from description")]),a._v("\napk info "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-a")]),a._v(" zlib\napk info -vv"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sort")]),a._v("\napk info "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-r")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-R")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# require / depency")]),a._v("\napk version "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-l")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'<'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# show available updates")]),a._v("\napk upgrade "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-U")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-a")]),a._v("\napk "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-u")]),a._v(" xxx "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# update xxx")]),a._v("\n\n/etc/runlevels "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# runlevel")]),a._v("\napk "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" openrc "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# use openrc for init system")]),a._v("\nrc-update "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" xxx "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# set to start on")]),a._v("\nrc-service xxx start "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# equal -> /etc/init.d/xxx start")]),a._v("\nrc-status\n\nadduser xxx\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("passwd")]),a._v(" xxx\n\napk "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" ansible "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# server")]),a._v("\nssh-keygen\n/etc/ansible/hosts\napk "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" python "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# node")]),a._v("\nssh-copy-id\n\napk "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("man")]),a._v(" man-pages mdocml-apropos "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("less")]),a._v(" less-doc\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("PAGER")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("less\n/etc/rc.conf "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# /etc/rc.conf -> funny character")]),a._v("\napk "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("bash")]),a._v(" bash-doc bash-completion "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# bash")]),a._v("\napk "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" util-linux pciutils usbutils coreutils binutils findutils "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# grep / awk")]),a._v("\napk "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" build-base gcc abuild binutils binutils-doc gcc-doc "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# compile")]),a._v("\napk "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" cmake cmake-doc extra-cmake-modules extra-cmake-modules-doc\napk "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" ccache ccache-doc\n\napk "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# docker")]),a._v("\nrc-update "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" boot\nrc-service "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" start\napk "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" py-pip\npip "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker-compose")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ln")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" /usr/bin/docker-compose /usr/bin/doc\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# application")]),a._v("\napk "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" openssh "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ssh")]),a._v("\nrc-update "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" sshd\n/etc/init.d/sshd start\n/etc/sshd_config\napk "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" dropbear "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# another openssh implementation")]),a._v("\n")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);