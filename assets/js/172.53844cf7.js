(window.webpackJsonp=window.webpackJsonp||[]).push([[172],{484:function(a,s,t){"use strict";t.r(s);var e=t(14),n=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"declare"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#declare"}},[a._v("#")]),a._v(" declare")]),a._v(" "),s("p",[a._v("声明变量，设置或显示变量的值和属性。")]),a._v(" "),s("h2",{attrs:{id:"语法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[a._v("#")]),a._v(" 语法")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-aAfFgilnrtux"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-p"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),s("h2",{attrs:{id:"主要用途"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#主要用途"}},[a._v("#")]),a._v(" 主要用途")]),a._v(" "),s("ul",[s("li",[a._v("显示包含指定属性的全部变量和值")]),a._v(" "),s("li",[a._v("显示包含指定属性的一到多个变量和值")]),a._v(" "),s("li",[a._v("显示一到多个变量的属性和值")]),a._v(" "),s("li",[a._v("显示所有变量的属性和值并显示函数的定义")]),a._v(" "),s("li",[a._v("显示所有变量的属性和值")]),a._v(" "),s("li",[a._v("显示所有全局变量的属性和值")]),a._v(" "),s("li",[a._v("显示全部函数名和函数定义")]),a._v(" "),s("li",[a._v("只显示全部函数名")]),a._v(" "),s("li",[a._v("显示一到多个函数名和函数定义")]),a._v(" "),s("li",[a._v("只显示一到多个函数名")]),a._v(" "),s("li",[a._v("声明全局变量（可选：赋值）")]),a._v(" "),s("li",[a._v("声明变量（可选：赋值、属性）")]),a._v(" "),s("li",[a._v("增加、删除变量的属性（可选：赋值）")])]),a._v(" "),s("h2",{attrs:{id:"选项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#选项"}},[a._v("#")]),a._v(" 选项")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" 将操作或显示限制为函数名及函数定义。\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-F")]),a._v(" 只显示函数名（调试时附加行号和源文件）。\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-g")]),a._v(" 在shell函数中使用时创建全局变量；其他情况下忽略。\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" 显示每个名称的属性和值。\n\n*设置属性的选项:\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-a")]),a._v(" 创建数组（如果支持）。\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" 创建关联数组（如果支持）。\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" 增加整型属性。\n+i 删除整型属性。\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-l")]),a._v(" 增加小写属性，变量的值将转换为小写。\n+l 删除小写属性。\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n")]),a._v(" 增加引用属性（如果该选项存在）。\n+n 删除引用属性（如果该选项存在）。\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-r")]),a._v(" 增加只读属性。\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" 增加追踪属性。\n+t 删除追踪属性。\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-u")]),a._v(" 增加大写属性，变量的值将转换为大写。\n+u 删除大写属性。\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-x")]),a._v(" 增加导出属性。\n+x 删除导出属性。\n")])])]),s("h2",{attrs:{id:"参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[a._v("#")]),a._v(" 参数")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("name（可选）：变量名或函数名。\nvalue（可选）：变量的值。\n")])])]),s("h2",{attrs:{id:"返回值"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#返回值"}},[a._v("#")]),a._v(" 返回值")]),a._v(" "),s("p",[a._v("declare 返回true除非你提供了非法选项或赋值错误。具体导致异常的情况请查看"),s("strong",[a._v("讨论")]),a._v("章节的"),s("strong",[a._v("关于异常情况")]),a._v("。")]),a._v(" "),s("h2",{attrs:{id:"例子"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#例子"}},[a._v("#")]),a._v(" 例子")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 声明变量，当然也欢迎您在这个网站（感谢本项目发起人 @jaywcjlove）查询linux命令。")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("reference_website")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'https://wangchujiang.com/linux-command/'")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 显示所有包含整型属性的变量和值。")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 定义变量b并赋值为3，具有整型属性。")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("b")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("5")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v('# 显示属性，返回 declare -i b="5"。')]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" b\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 删除整型属性。")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v(" +i b\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v('# 显示属性，返回 declare -- b="5"。')]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" b\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 根据变量属性强制转换值的英文大小写。")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-u")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("uc_var")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'abc'")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-l")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("lc_var")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'ABC'")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 显示'ABC abc';")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${uc_var}")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${lc_var}")]),a._v('"')]),a._v("\n")])])]),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 定义函数内的全局变量")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function-name function"}},[a._v("test")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-g")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("a")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 或者")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("local")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-g")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("b")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 或者")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("c")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 让我们查看它们的属性。")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" a b c\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 执行函数。")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("test")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 返回结果。")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v('# declare -- a="3"')]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v('# declare -- b="3"')]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v('# declare -- c="3"')]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 定义函数外的全局变量")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("a")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("b")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v(" –p a b\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 返回结果如下。")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v('# declare -- a="3"')]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v('# declare -- b="3"')]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 定义局部变量")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function-name function"}},[a._v("test2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("local")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("a")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("b")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\ntest2\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 没有该变量（已经被销毁了）")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${a}")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${b}")]),a._v('"')]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 因此，我们日常脚本中最常见的类似于'a=3'实际上是声明并赋值了一个全局变量。")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 在接下来的 **讨论** 环节会延伸讨论全局和局部变量问题。")]),a._v("\n")])])]),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 注意，不能使用 `+a` 或 `+A` 取消数组，也不能使用 `+r` 取消只读属性。")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 定义只读数组，设置属性的同时定义赋值。")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ar")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("season")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'Spring'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'Summer'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'Autumn'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'Winter'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 或者这样。")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("season")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'Spring'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'Summer'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'Autumn'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'Winter'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ar")]),a._v(" season\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 显示所有数组。")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-a")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 定义关联数组。")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("fruits")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'apple'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'red'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'banana'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'yellow'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 显示所有关联数组。")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v("\n")])])]),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 显示所有变量的属性和值并显示函数的定义，输出很长。")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 显示所有变量的属性和值。")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 显示所有全局变量的属性和值。")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-g")]),a._v("\n")])])]),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 显示全部函数名和函数定义。")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 只显示全部函数名。")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-F")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 定义两个函数。")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function-name function"}},[a._v("func_a")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("date")]),a._v(" +"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"%F %T"')]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function-name function"}},[a._v("func_b")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-lh")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--sort")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 显示一到多个函数名和函数定义。")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" func_a func_b\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 只显示一到多个函数名，验证某个名称是否已经定义为函数时有用。")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("declare")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-F")]),a._v(" func_a func_b\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 最好不要让函数名和变量名相同。")]),a._v("\n")])])]),s("h2",{attrs:{id:"讨论"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#讨论"}},[a._v("#")]),a._v(" 讨论")]),a._v(" "),s("ol",[s("li",[s("p",[a._v("全局和局部变量")]),a._v(" "),s("p",[a._v("正如上面"),s("strong",[a._v("例子")]),a._v("指出的情况，我们在日常编写程序的时候需要了解这些概念，在这里\n做个简要地介绍，当然你也可以很方便的搜索到相关内容。")]),a._v(" "),s("ul",[s("li",[a._v("全局变量：在整个脚本执行期间，只要没有被删除就"),s("strong",[a._v("一直存在")]),a._v("。")]),a._v(" "),s("li",[a._v("局部变量：在函数内定义，函数执行后就被删除。")])]),a._v(" "),s("p",[a._v("建议函数内使用"),s("code",[a._v("local")]),a._v("命令，函数外使用"),s("code",[a._v("declare")]),a._v("命令。")]),a._v(" "),s("blockquote",[s("p",[s("em",[a._v("不要在脚本中定义过多的全局变量，那样可能会被其他函数调用造成意料之外的后果，并且也不方便检查出来。")])]),a._v(" "),s("p",[s("em",[a._v("更不用说缺乏必要的注释了 —— ZhuangZhu-74")])])]),a._v(" "),s("p",[a._v("相关资料：")]),a._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://github.com/google/styleguide",target:"_blank",rel:"noopener noreferrer"}},[a._v("google提供的编码规范"),s("OutboundLink")],1)]),a._v(" "),s("li",[s("a",{attrs:{href:"https://unix.stackexchange.com/questions/381761/what-do-declare-name-and-declare-g-do",target:"_blank",rel:"noopener noreferrer"}},[a._v("全局变量的讨论"),s("OutboundLink")],1)])])]),a._v(" "),s("li",[s("p",[a._v("关于"),s("code",[a._v("declare")]),a._v(" "),s("code",[a._v("typeset")]),a._v(" "),s("code",[a._v("export")]),a._v(" "),s("code",[a._v("local")]),a._v(" "),s("code",[a._v("readonly")]),a._v("命令")]),a._v(" "),s("p",[a._v("为什么"),s("code",[a._v("declare")]),a._v("能做到的事，还需要定义其他这些命令呢？")]),a._v(" "),s("p",[a._v("因为这样语句含义会更加明确，例如：")]),a._v(" "),s("ul",[s("li",[a._v("设置导出属性的变量时，"),s("code",[a._v("export var")]),a._v("和"),s("code",[a._v("declare -x var")]),a._v("。")]),a._v(" "),s("li",[a._v("在函数内声明变量时，使用"),s("code",[a._v("local")]),a._v("。")]),a._v(" "),s("li",[a._v("声明只读变量，使用"),s("code",[a._v("readonly")]),a._v("。")])]),a._v(" "),s("p",[s("code",[a._v("typeset")]),a._v("和"),s("code",[a._v("declare")]),a._v("命令一样。")])]),a._v(" "),s("li",[s("p",[a._v("关于异常情况")]),a._v(" "),s("p",[a._v("有多种原因导致"),s("code",[a._v("declare")]),a._v("失败，关于这些情况可以参考"),s("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/bash.html#index-declare",target:"_blank",rel:"noopener noreferrer"}},[a._v("bash在线文档declare部分(最新版)"),s("OutboundLink")],1),a._v("，或执行 "),s("code",[a._v("info bash")]),a._v("\n查看"),s("code",[a._v("declare")]),a._v("部分最后一大串"),s("code",[a._v("an attempt is")]),a._v("开头的句子。")])])]),a._v(" "),s("h3",{attrs:{id:"注意"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#注意"}},[a._v("#")]),a._v(" 注意")]),a._v(" "),s("ol",[s("li",[a._v("该命令是bash内建命令，相关的帮助信息请查看"),s("code",[a._v("help")]),a._v("命令。")]),a._v(" "),s("li",[a._v("导出属性的相关介绍请查看'export'命令。")]),a._v(" "),s("li",[a._v("只读属性的相关介绍请查看'readonly'命令。")]),a._v(" "),s("li",[a._v("引用属性的相关介绍请查看'unset'命令的例子部分。")])])])}),[],!1,null,null,null);s.default=n.exports}}]);