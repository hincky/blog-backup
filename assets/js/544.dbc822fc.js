(window.webpackJsonp=window.webpackJsonp||[]).push([[544],{857:function(s,t,a){"use strict";a.r(t);var e=a(14),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"ss"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ss"}},[s._v("#")]),s._v(" ss")]),s._v(" "),t("p",[s._v("比 netstat 好用的socket统计信息，iproute2 包附带的另一个工具，允许你查询 socket 的有关统计信息")]),s._v(" "),t("h2",{attrs:{id:"补充说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#补充说明"}},[s._v("#")]),s._v(" 补充说明")]),s._v(" "),t("p",[t("strong",[s._v("ss命令")]),s._v(" 用来显示处于活动状态的套接字信息。ss命令可以用来获取socket统计信息，它可以显示和netstat类似的内容。但ss的优势在于它能够显示更多更详细的有关TCP和连接状态的信息，而且比netstat更快速更高效。")]),s._v(" "),t("p",[s._v("当服务器的socket连接数量变得非常大时，无论是使用netstat命令还是直接"),t("code",[s._v("cat /proc/net/tcp")]),s._v("，执行速度都会很慢。可能你不会有切身的感受，但请相信我，当服务器维持的连接达到上万个的时候，使用netstat等于浪费 生命，而用ss才是节省时间。")]),s._v(" "),t("p",[s._v("天下武功唯快不破。ss快的秘诀在于，它利用到了TCP协议栈中tcp_diag。tcp_diag是一个用于分析统计的模块，可以获得Linux 内核中第一手的信息，这就确保了ss的快捷高效。当然，如果你的系统中没有tcp_diag，ss也可以正常运行，只是效率会变得稍慢。")]),s._v(" "),t("h3",{attrs:{id:"语法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[s._v("#")]),s._v(" 语法")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("ss "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("参数"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nss "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("参数"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("过滤"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),t("h3",{attrs:{id:"选项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#选项"}},[s._v("#")]),s._v(" 选项")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("-h, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--help")]),s._v("      帮助信息\n-V, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--version")]),s._v("   程序版本信息\n-n, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--numeric")]),s._v("   不解析服务名称\n-r, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--resolve")]),s._v("   解析主机名\n-a, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--all")]),s._v("       显示所有套接字（sockets）\n-l, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--listening")]),s._v(" 显示监听状态的套接字（sockets）\n-o, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--options")]),s._v("   显示计时器信息\n-e, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--extended")]),s._v("  显示详细的套接字（sockets）信息\n-m, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--memory")]),s._v("    显示套接字（socket）的内存使用情况\n-p, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--processes")]),s._v(" 显示使用套接字（socket）的进程\n-i, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--info")]),s._v("      显示 TCP内部信息\n-s, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--summary")]),s._v("   显示套接字（socket）使用概况\n-4, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--ipv4")]),s._v("      仅显示IPv4的套接字（sockets）\n-6, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--ipv6")]),s._v("      仅显示IPv6的套接字（sockets）\n-0, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--packet")]),s._v("    显示 PACKET 套接字（socket）\n-t, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--tcp")]),s._v("       仅显示 TCP套接字（sockets）\n-u, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--udp")]),s._v("       仅显示 UCP套接字（sockets）\n-d, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--dccp")]),s._v("      仅显示 DCCP套接字（sockets）\n-w, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--raw")]),s._v("       仅显示 RAW套接字（sockets）\n-x, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--unix")]),s._v("      仅显示 Unix套接字（sockets）\n-f, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--family")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("FAMILY  显示 FAMILY类型的套接字（sockets），FAMILY可选，支持  unix, inet, inet6, link, netlink\n-A, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--query")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("QUERY, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--socket")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("QUERY\n      QUERY :"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("all"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("inet"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("tcp"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("udp"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("raw"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("unix"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("packet"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("netlink"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(",QUERY"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n-D, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--diag")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("FILE     将原始TCP套接字（sockets）信息转储到文件\n -F, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--filter")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("FILE  从文件中都去过滤器信息\n       FILTER :"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" state TCP-STATE "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" EXPRESSION "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),t("h3",{attrs:{id:"实例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#实例"}},[s._v("#")]),s._v(" 实例")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("ss "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-a")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示TCP连接")]),s._v("\nss "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示 Sockets 摘要")]),s._v("\nss "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出所有打开的网络连接端口")]),s._v("\nss "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-pl")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看进程使用的socket")]),s._v("\nss "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-lp")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 找出打开套接字/端口应用程序")]),s._v("\nss "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-u")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-a")]),s._v("    显示所有UDP Sockets\nss "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" state established "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'( dport = :smtp or sport = :smtp )'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示所有状态为established的SMTP连接")]),s._v("\nss "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" state established "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'( dport = :http or sport = :http )'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示所有状态为Established的HTTP连接")]),s._v("\nss "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" state fin-wait-1 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'( sport = :http or sport = :https )'")]),s._v(" dst "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("193.233")]),s._v(".7/24  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列举出处于 FIN-WAIT-1状态的源端口为 80或者 443，目标网络为 193.233.7/24所有 tcp套接字")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ss 和 netstat 效率对比")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-at")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),s._v(" ss\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 匹配远程地址和端口号")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ss dst ADDRESS_PATTERN")]),s._v("\nss dst "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.5\nss dst "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".119.113:http\nss dst "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".119.113:smtp\nss dst "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".119.113:443\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 匹配本地地址和端口号")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ss src ADDRESS_PATTERN")]),s._v("\nss src "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".119.103\nss src "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".119.103:http\nss src "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".119.103:80\nss src "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".119.103:smtp\nss src "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".119.103:25\n")])])]),t("p",[t("strong",[s._v("将本地或者远程端口和一个数比较")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ss dport OP PORT 远程端口和一个数比较；")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ss sport OP PORT 本地端口和一个数比较")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# OP 可以代表以下任意一个:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# <= or le : 小于或等于端口号")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# >= or ge : 大于或等于端口号")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# == or eq : 等于端口号")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# != or ne : 不等于端口号")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# < or gt : 小于端口号")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# > or lt : 大于端口号")]),s._v("\nss  sport "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" :http\nss  dport "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" :http\nss  dport "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" :1024\nss  sport "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" :1024\nss sport "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" :32000\nss  sport eq :22\nss  dport "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" :22\nss  state connected sport "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" :http\nss "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" sport "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" :http or sport "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" :https "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nss "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" state fin-wait-1 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" sport "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" :http or sport "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" :https "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" dst "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1/24\n")])])]),t("p",[t("strong",[s._v("用TCP 状态过滤Sockets")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("ss "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-4")]),s._v(" state closing\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ss -4 state FILTER-NAME-HERE")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ss -6 state FILTER-NAME-HERE")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# FILTER-NAME-HERE 可以代表以下任何一个：")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# established、 syn-sent、 syn-recv、 fin-wait-1、 fin-wait-2、 time-wait、 closed、 close-wait、 last-ack、 listen、 closing、")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# all : 所有以上状态")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# connected : 除了listen and closed的所有状态")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# synchronized :所有已连接的状态除了syn-sent")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# bucket : 显示状态为maintained as minisockets,如：time-wait和syn-recv.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# big : 和bucket相反.")]),s._v("\n")])])]),t("p",[t("strong",[s._v("显示ICP连接")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ss -t -a")]),s._v("\nState       Recv-Q Send-Q                            Local Address:Port                                Peer Address:Port\nLISTEN      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("                                             *:3306                                           *:*\nLISTEN      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("                                             *:http                                           *:*\nLISTEN      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("                                             *:ssh                                            *:*\nLISTEN      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("                                     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:smtp                                           *:*\nESTAB       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("                                "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("112.124")]),s._v(".15.130:42071                              "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("42.156")]),s._v(".166.25:http\nESTAB       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("                                "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("112.124")]),s._v(".15.130:ssh                              "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("121.229")]),s._v(".196.235:33398\n")])])]),t("p",[t("strong",[s._v("显示 Sockets 摘要")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ss -s")]),s._v("\nTotal: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("kernel "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("189")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nTCP:   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("estab "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(", closed "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(", orphaned "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", synrecv "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", timewait "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", ports "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n\nTransport Total     "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ip")]),s._v("        IPv6\n*         "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("189")]),s._v("       -         -\nRAW       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("         "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("         "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nUDP       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("         "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("         "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nTCP       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("         "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("         "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nINET      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nFRAG      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("         "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("         "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])])]),t("p",[s._v("列出当前的established, closed, orphaned and waiting TCP sockets")]),s._v(" "),t("p",[t("strong",[s._v("列出所有打开的网络连接端口")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ss -l")]),s._v("\nRecv-Q Send-Q                                 Local Address:Port                                     Peer Address:Port\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("                                                  *:3306                                                *:*\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("                                                  *:http                                                *:*\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("                                                  *:ssh                                                 *:*\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("                                          "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:smtp                                                *:*\n")])])]),t("p",[t("strong",[s._v("查看进程使用的socket")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ss -pl")]),s._v("\nRecv-Q Send-Q                                          Local Address:Port                                              Peer Address:Port\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("                                                           *:3306                                                         *:*        users:"),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("((")]),s._v('"mysqld"'),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1718")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("                                                           *:http                                                         *:*        users:"),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("((")]),s._v('"nginx"'),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13312")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v('"nginx"'),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13333")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("                                                           *:ssh                                                          *:*        users:"),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("((")]),s._v('"sshd"'),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1379")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("                                                   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:smtp                                                         *:*        us\n")])])]),t("p",[t("strong",[s._v("找出打开套接字/端口应用程序")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ss -pl | grep 3306")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("                            *:3306                          *:*        users:"),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("((")]),s._v('"mysqld"'),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1718")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")])]),s._v("\n")])])]),t("p",[t("strong",[s._v("显示所有UDP Sockets")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ss -u -a")]),s._v("\nState       Recv-Q Send-Q                                     Local Address:Port                                         Peer Address:Port\nUNCONN      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("                                                      *:syslog                                                  *:*\nUNCONN      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("                                         "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("112.124")]),s._v(".15.130:ntp                                                     *:*\nUNCONN      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("                                            "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.160")]),s._v(".7.81:ntp                                                     *:*\nUNCONN      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("                                              "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:ntp                                                     *:*\nUNCONN      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("                                                      *:ntp                                                     *:*\n")])])]),t("p",[t("strong",[s._v("出所有端口为 22（ssh）的连接")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ss state all sport = :ssh")]),s._v("\nNetid State      Recv-Q Send-Q     Local Address:Port                      Peer Address:Port\ntcp   LISTEN     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),s._v("                    *:ssh                                  *:*\ntcp   ESTAB      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".0.136:ssh                      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".0.102:46540\ntcp   LISTEN     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),s._v("                   :::ssh                                 :::*\n")])])]),t("p",[t("strong",[s._v("查看TCP的连接状态")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ss  -tan|awk 'NR>1{++S[$1]}END{for (a in S) print a,S[a]}'")]),s._v("\nLISTEN "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("\nESTAB "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),s._v("\nTIME-WAIT "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v("\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);