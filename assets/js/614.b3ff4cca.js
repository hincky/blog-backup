(window.webpackJsonp=window.webpackJsonp||[]).push([[614],{928:function(a,s,t){"use strict";t.r(s);var e=t(14),r=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"useradd"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#useradd"}},[a._v("#")]),a._v(" useradd")]),a._v(" "),s("p",[a._v("创建的新的系统用户")]),a._v(" "),s("h2",{attrs:{id:"补充说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#补充说明"}},[a._v("#")]),a._v(" 补充说明")]),a._v(" "),s("p",[s("strong",[a._v("useradd命令")]),a._v(" 用于Linux中创建的新的系统用户。useradd可用来建立用户帐号。帐号建好之后，再用passwd设定帐号的密码．而可用userdel删除帐号。使用useradd指令所建立的帐号，实际上是保存在"),s("code",[a._v("/etc/passwd")]),a._v("文本文件中。")]),a._v(" "),s("p",[a._v("在Slackware中，adduser指令是个script程序，利用交谈的方式取得输入的用户帐号资料，然后再交由真正建立帐号的useradd命令建立新用户，如此可方便管理员建立用户帐号。在Red Hat Linux中， "),s("strong",[a._v("adduser命令")]),a._v(" 则是useradd命令的符号连接，两者实际上是同一个指令。")]),a._v(" "),s("h3",{attrs:{id:"语法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[a._v("#")]),a._v(" 语法")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("useradd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("选项"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("参数"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),s("h3",{attrs:{id:"选项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#选项"}},[a._v("#")]),a._v(" 选项")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("-b, --base-dir BASE_DIR  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 如果未指定 -d HOME_DIR，则系统的默认基本目录。如果未指定此选项，useradd 将使用 /etc/default/useradd 中的 HOME 变量指定的基本目录，或默认使用 /home。")]),a._v("\n-c, "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--comment")]),a._v(" COMMENT    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 加上备注文字。任何文本字符串。它通常是对登录名的简短描述，目前用作用户全名的字段。")]),a._v("\n-d, "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--home")]),a._v(" HOME_DIR      "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 将使用 HOME_DIR 作为用户登录目录的值来创建新用户。 ")]),a._v("\n-D, "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--defaults")]),a._v("           "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 变更预设值。")]),a._v("\n-e, "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--expiredate")]),a._v(" EXPIRE_DATE "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 用户帐户将被禁用的日期。 日期以 YYYY-MM-DD 格式指定。")]),a._v("\n-f, "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--inactive")]),a._v(" INACTIVE      "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 密码过期后到帐户被永久禁用的天数。")]),a._v("\n-g, "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--gid")]),a._v(" GROUP   "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 用户初始登录组的组名或编号。组名必须存在。组号必须引用已经存在的组。")]),a._v("\n-G, "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--groups")]),a._v(" GROUP1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(",GROUP2,"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(",GROUPN"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 用户也是其成员的补充组列表。每个组用逗号隔开，中间没有空格。")]),a._v("\n-h, "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--help")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 显示帮助信息并退出。")]),a._v("\n-k, "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--skel")]),a._v(" SKEL_DIR "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 骨架目录，其中包含要在用户的主目录中复制的文件和目录，当主目录由 useradd 创建时。")]),a._v("\n-K, "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--key")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("KEY")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("VALUE "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 覆盖 /etc/login.defs 默认值（UID_MIN、UID_MAX、UMASK、PASS_MAX_DAYS 等）。")]),a._v("\n-l, --no-log-init   "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 不要将用户添加到 lastlog 和 faillog 数据库。")]),a._v("\n-m, --create-home   "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 如果用户的主目录不存在，则创建它。")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-M")]),a._v("                  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 不要创建用户的主目录，即使 /etc/login.defs (CREATE_HOME) 中的系统范围设置设置为 yes。")]),a._v("\n-N, --no-user-group "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 不要创建与用户同名的组，而是将用户添加到由 -g 选项或 /etc/default/useradd 中的 GROUP 变量指定的组中。")]),a._v("\n-o, --non-unique    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 允许创建具有重复（非唯一）UID 的用户帐户。 此选项仅在与 -o 选项结合使用时有效。")]),a._v("\n-p, "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--password")]),a._v(" PASSWORD "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# crypt(3) 返回的加密密码。 默认是禁用密码。")]),a._v("\n-r, "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--system")]),a._v("        "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 创建一个系统帐户。")]),a._v("\n-s, "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--shell")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("SHELL")]),a._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 用户登录 shell 的名称。")]),a._v("\n-u, "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--uid")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("UID")]),a._v("       "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 用户 ID 的数值。")]),a._v("\n-U, --user-group    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 创建一个与用户同名的组，并将用户添加到该组。")]),a._v("\n-Z, --selinux-user SEUSER "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 用户登录的 SELinux 用户。 默认情况下将此字段留空，这会导致系统选择默认的 SELinux 用户。")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 更改默认值")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 当仅使用 -D 选项调用时，useradd 将显示当前默认值。 当使用 -D 和其他选项调用时，useradd 将更新指定选项的默认值。 有效的默认更改选项是：")]),a._v("\n")])])]),s("h3",{attrs:{id:"参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[a._v("#")]),a._v(" 参数")]),a._v(" "),s("p",[a._v("用户名：要创建的用户名。")]),a._v(" "),s("h3",{attrs:{id:"退出值"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#退出值"}},[a._v("#")]),a._v(" 退出值")]),a._v(" "),s("p",[s("code",[a._v("useradd")]),a._v(" 命令以以下值退出：")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" 成功\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" 无法更新密码文件\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(" 无效的命令语法\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v(" 选项的无效参数\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("4")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("UID")]),a._v(" 已经在使用（并且没有 -o）\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("6")]),a._v(" 指定的组不存在\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("9")]),a._v(" 用户名已被使用\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("10")]),a._v(" 无法更新组文件\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("12")]),a._v(" 无法创建主目录\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("13")]),a._v(" 无法创建邮件假脱机\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("14")]),a._v(" 无法更新 SELinux 用户映射\n")])])]),s("h3",{attrs:{id:"文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#文件"}},[a._v("#")]),a._v(" 文件")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("/etc/passwd "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 用户帐户信息。")]),a._v("\n/etc/shadow "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 保护用户帐户信息。")]),a._v("\n/etc/group  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 组帐户信息。")]),a._v("\n/etc/gshadow "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 保护组帐户信息。")]),a._v("\n/etc/default/useradd "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 帐户创建的默认值。")]),a._v("\n/etc/skel/                                 "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 包含默认文件的目录。")]),a._v("\n/etc/login.defs "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 影子密码套件配置。")]),a._v("\n")])])]),s("h3",{attrs:{id:"实例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实例"}},[a._v("#")]),a._v(" 实例")]),a._v(" "),s("p",[a._v("新建用户加入组：")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("useradd")]),a._v(" –g sales jack –G company,employees    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# -g：加入主要组、-G：加入次要组")]),a._v("\n")])])]),s("p",[a._v("建立一个新用户账户，并设置ID：")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("useradd")]),a._v(" caojh "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-u")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("544")]),a._v("\n")])])]),s("p",[a._v("需要说明的是，设定ID值时尽量要大于500，以免冲突。因为Linux安装后会建立一些特殊用户，一般0到499之间的值留给bin、mail这样的系统账号。")]),a._v(" "),s("p",[a._v("新建一个普通用户：")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("useradd")]),a._v(" lutixia\n")])])]),s("p",[a._v("新建一个系统用户,系统用户一般用于管理服务，无需登录，所以分配nologin，限制其登录系统：")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("useradd")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-r")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" /sbin/nologin mq\n")])])]),s("p",[a._v("修改创建用户的默认参数，设置密码过期后到永久禁用的不活动时间为30天:")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("useradd")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-D")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("30")]),a._v("\n")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);