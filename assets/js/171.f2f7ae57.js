(window.webpackJsonp=window.webpackJsonp||[]).push([[171],{483:function(s,t,a){"use strict";a.r(t);var r=a(14),e=Object(r.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"dd"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dd"}},[s._v("#")]),s._v(" dd")]),s._v(" "),t("p",[s._v("复制文件并对原文件的内容进行转换和格式化处理")]),s._v(" "),t("h2",{attrs:{id:"补充说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#补充说明"}},[s._v("#")]),s._v(" 补充说明")]),s._v(" "),t("p",[t("strong",[s._v("dd命令")]),s._v(" 用于复制文件并对原文件的内容进行转换和格式化处理。dd命令功能很强大的，对于一些比较底层的问题，使用dd命令往往可以得到出人意料的效果。用的比较多的还是用dd来备份裸设备。但是不推荐，如果需要备份oracle裸设备，可以使用rman备份，或使用第三方软件备份，使用dd的话，管理起来不太方便。")]),s._v(" "),t("p",[s._v("建议在有需要的时候使用dd 对物理磁盘操作，如果是文件系统的话还是使用tar backup cpio等其他命令更加方便。另外，使用dd对磁盘操作时，最好使用块设备文件。")]),s._v(" "),t("h3",{attrs:{id:"语法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[s._v("#")]),s._v(" 语法")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("dd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("选项"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("h3",{attrs:{id:"选项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#选项"}},[s._v("#")]),s._v(" 选项")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("bs")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("字节数"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("：将ibs（输入）与obs（输出）设成指定的字节数；\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cbs")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("字节数"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("：转换时，每次只转换指定的字节数；\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("conv")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("关键字"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("：指定文件转换的方式；\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("count")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("区块数"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("：仅读取指定的区块数；\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ibs")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("字节数"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("：每次读取的字节数；\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("obs")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("字节数"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("：每次输出的字节数；\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("of")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("文件"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("：输出到文件；\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("seek")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("区块数"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("：一开始输出时，跳过指定的区块数；\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("skip")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("区块数"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("：一开始读取时，跳过指定的区块数；\n--help：帮助；\n--version：显示版本信息。\n")])])]),t("h3",{attrs:{id:"实例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#实例"}},[s._v("#")]),s._v(" 实例")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost text"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# dd if=/dev/zero of=sun.txt bs=1M count=1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("+0 records "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("+0 records out\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1048576")]),s._v(" bytes "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v(" MB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" copied, "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.006107")]),s._v(" seconds, "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172")]),s._v(" MB/s\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost text"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# du -sh sun.txt ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".1M    sun.txt\n")])])]),t("p",[s._v("该命令创建了一个1M大小的文件sun.txt，其中参数解释：")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("if")]),s._v("  代表输入文件。如果不指定if，默认就会从stdin中读取输入。")]),s._v(" "),t("li",[t("strong",[s._v("of")]),s._v("  代表输出文件。如果不指定of，默认就会将stdout作为默认输出。")]),s._v(" "),t("li",[t("strong",[s._v("bs")]),s._v("  代表字节为单位的块大小。")]),s._v(" "),t("li",[t("strong",[s._v("count")]),s._v("  代表被复制的块数。")]),s._v(" "),t("li",[t("strong",[s._v("/dev/zero")]),s._v("  是一个字符设备，会不断返回0值字节（\\0）。")])]),s._v(" "),t("p",[s._v("块大小可以使用的计量单位表")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("单元大小")]),s._v(" "),t("th",[s._v("代码")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("字节（1B）")]),s._v(" "),t("td",[s._v("c")])]),s._v(" "),t("tr",[t("td",[s._v("字节（2B）")]),s._v(" "),t("td",[s._v("w")])]),s._v(" "),t("tr",[t("td",[s._v("块（512B）")]),s._v(" "),t("td",[s._v("b")])]),s._v(" "),t("tr",[t("td",[s._v("千字节（1024B）")]),s._v(" "),t("td",[s._v("k")])]),s._v(" "),t("tr",[t("td",[s._v("兆字节（1024KB）")]),s._v(" "),t("td",[s._v("M")])]),s._v(" "),t("tr",[t("td",[s._v("吉字节（1024MB）")]),s._v(" "),t("td",[s._v("G")])])])]),s._v(" "),t("p",[s._v("以上命令可以看出dd命令来测试内存操作速度：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1048576")]),s._v(" bytes "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v(" MB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" copied, "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.006107")]),s._v(" seconds, "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172")]),s._v(" MB/s\n")])])]),t("p",[t("strong",[s._v("生成随机字符串")])]),s._v(" "),t("p",[s._v("我们甚至可以使用 /dev/urandom 设备配合 dd 命令 来获取随机字符串。")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# dd if=/dev/urandom bs=1 count=15|base64 -w 0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v("+0 records "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v("+0 records out\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(" bytes "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(" B"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" copied, "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.000111993")]),s._v(" s, "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("134")]),s._v(" kB/s\nwFRAnlkXeBXmWs1MyGEs\n")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);