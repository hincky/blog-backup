(window.webpackJsonp=window.webpackJsonp||[]).push([[600],{913:function(a,s,t){"use strict";t.r(s);var e=t(14),n=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"umount"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#umount"}},[a._v("#")]),a._v(" umount")]),a._v(" "),s("p",[a._v("用于卸载已经加载的文件系统")]),a._v(" "),s("h2",{attrs:{id:"补充说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#补充说明"}},[a._v("#")]),a._v(" 补充说明")]),a._v(" "),s("p",[s("strong",[a._v("umount命令")]),a._v(" 用于卸载已经加载的文件系统。利用设备名或挂载点都能umount文件系统，不过最好还是通过挂载点卸载，以免使用绑定挂载（一个设备，多个挂载点）时产生混乱。")]),a._v(" "),s("h3",{attrs:{id:"语法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[a._v("#")]),a._v(" 语法")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("umount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("选项"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("参数"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),s("h3",{attrs:{id:"选项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#选项"}},[a._v("#")]),a._v(" 选项")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("-a：卸除/etc/mtab中记录的所有文件系统；\n-h：显示帮助；\n-n：卸除时不要将信息存入/etc/mtab文件中；\n-r：若无法成功卸除，则尝试以只读的方式重新挂入文件系统；\n-t"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("文件系统类型"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("：仅卸除选项中所指定的文件系统；\n-v：执行时显示详细的信息；\n-V：显示版本信息。\n")])])]),s("h3",{attrs:{id:"参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[a._v("#")]),a._v(" 参数")]),a._v(" "),s("p",[a._v("文件系统：指定要卸载的文件系统或者其对应的设备文件名。")]),a._v(" "),s("h3",{attrs:{id:"实例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实例"}},[a._v("#")]),a._v(" 实例")]),a._v(" "),s("p",[a._v("下面两条命令分别通过设备名和挂载点卸载文件系统，同时输出详细信息：")]),a._v(" "),s("p",[a._v("通过设备名卸载")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("umount")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /dev/sda1\n/dev/sda1 umounted\n")])])]),s("p",[a._v("通过挂载点卸载")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("umount")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /mnt/mymount/\n/tmp/diskboot.img umounted\n")])])]),s("p",[a._v("如果设备正忙，卸载即告失败。卸载失败的常见原因是，某个打开的shell当前目录为挂载点里的某个目录：")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("umount")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /mnt/mymount/\numount: /mnt/mymount: device is busy\numount: /mnt/mymount: device is busy\n")])])]),s("p",[a._v("有时，导致设备忙的原因并不好找。碰到这种情况时，可以用lsof列出已打开文件，然后搜索列表查找待卸载的挂载点：")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("lsof")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" mymount         查找mymount分区里打开的文件\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("bash")]),a._v("   "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("9341")]),a._v("  francois  cwd   DIR   "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("8,1")]),a._v("   "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1024")]),a._v("    "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(" /mnt/mymount\n")])])]),s("p",[a._v("从上面的输出可知，mymount分区无法卸载的原因在于，francois运行的PID为9341的bash进程。")]),a._v(" "),s("p",[a._v("对付系统文件正忙的另一种方法是执行延迟卸载：")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("umount")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-vl")]),a._v(" /mnt/mymount/     执行延迟卸载\n")])])]),s("p",[a._v("延迟卸载（lazy unmount）会立即卸载目录树里的文件系统，等到设备不再繁忙时才清理所有相关资源。卸载可移动存储介质还可以用eject命令。下面这条命令会卸载cd并弹出CD：")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("eject")]),a._v(" /dev/cdrom      卸载并弹出CD \n")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);