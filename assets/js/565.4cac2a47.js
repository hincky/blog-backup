(window.webpackJsonp=window.webpackJsonp||[]).push([[565],{877:function(s,t,e){"use strict";e.r(t);var a=e(14),n=Object(a.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"sysctl"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sysctl"}},[s._v("#")]),s._v(" sysctl")]),s._v(" "),t("p",[s._v("时动态地修改内核的运行参数")]),s._v(" "),t("h2",{attrs:{id:"补充说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#补充说明"}},[s._v("#")]),s._v(" 补充说明")]),s._v(" "),t("p",[t("strong",[s._v("sysctl命令")]),s._v(" 被用于在内核运行时动态地修改内核的运行参数，可用的内核参数在目录"),t("code",[s._v("/proc/sys")]),s._v("中。它包含一些TCP/ip堆栈和虚拟内存系统的高级选项， 这可以让有经验的管理员提高引人注目的系统性能。用sysctl可以读取设置超过五百个系统变量。")]),s._v(" "),t("h3",{attrs:{id:"语法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[s._v("#")]),s._v(" 语法")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("sysctl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("选项"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("参数"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("h3",{attrs:{id:"选项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#选项"}},[s._v("#")]),s._v(" 选项")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("-n：打印值时不打印关键字；\n-e：忽略未知关键字错误；\n-N：仅打印名称；\n-w：当改变sysctl设置时使用此项；\n-p：从配置文件“/etc/sysctl.conf”加载内核参数设置；\n-a：打印当前所有可用的内核参数变量和值；\n-A：以表格方式打印当前所有可用的内核参数变量和值。\n")])])]),t("h3",{attrs:{id:"参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[s._v("#")]),s._v(" 参数")]),s._v(" "),t("p",[s._v("变量=值：设置内核参数对应的变量值。")]),s._v(" "),t("h3",{attrs:{id:"实例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#实例"}},[s._v("#")]),s._v(" 实例")]),s._v(" "),t("p",[s._v("查看所有可读变量：")]),s._v(" "),t("p",[s._v("sysctl -a")]),s._v(" "),t("p",[s._v("读一个指定的变量，例如"),t("code",[s._v("kern.maxproc")]),s._v("：")]),s._v(" "),t("p",[s._v("sysctl kern.maxproc kern.maxproc: 1044")]),s._v(" "),t("p",[s._v("要设置一个指定的变量，直接用"),t("code",[s._v("variable=value")]),s._v("这样的语法：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sysctl")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("kern.maxfiles")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5000")]),s._v("\nkern.maxfiles: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2088")]),s._v(" -"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5000")]),s._v("\n")])])]),t("p",[s._v("您可以使用sysctl修改系统变量，也可以通过编辑sysctl.conf文件来修改系统变量。sysctl.conf看起来很像rc.conf。它用"),t("code",[s._v("variable=value")]),s._v("的形式来设定值。指定的值在系统进入多用户模式之后被设定。并不是所有的变量都可以在这个模式下设定。")]),s._v(" "),t("p",[s._v("sysctl变量的设置通常是字符串、数字或者布尔型。（布尔型用 1 来表示'yes'，用 0 来表示'no'）。")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sysctl")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-w")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("kernel.sysrq")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sysctl")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-w")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("kernel.core_uses_pid")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sysctl")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-w")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("net.ipv4.conf.default.accept_redirects")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sysctl")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-w")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("net.ipv4.conf.default.accept_source_route")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sysctl")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-w")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("net.ipv4.conf.default.rp_filter")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sysctl")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-w")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("net.ipv4.tcp_syncookies")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sysctl")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-w")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("net.ipv4.tcp_max_syn_backlog")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sysctl")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-w")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("net.ipv4.tcp_fin_timeout")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sysctl")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-w")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("net.ipv4.tcp_synack_retries")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sysctl")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-w")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("net.ipv4.tcp_keepalive_time")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3600")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sysctl")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-w")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("net.ipv4.tcp_window_scaling")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sysctl")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-w")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("net.ipv4.tcp_sack")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])])]),t("h3",{attrs:{id:"配置sysctl"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置sysctl"}},[s._v("#")]),s._v(" 配置sysctl")]),s._v(" "),t("p",[s._v("编辑此文件："),t("code",[s._v("/etc/sysctl.conf")])]),s._v(" "),t("p",[s._v("如果该文件为空，则输入以下内容，否则请根据情况自己做调整：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Controls source route verification")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Default should work for all interfaces")]),s._v("\nnet.ipv4.conf.default.rp_filter "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# net.ipv4.conf.all.rp_filter = 1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# net.ipv4.conf.lo.rp_filter = 1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# net.ipv4.conf.eth0.rp_filter = 1")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Disables IP source routing")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Default should work for all interfaces")]),s._v("\nnet.ipv4.conf.default.accept_source_route "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# net.ipv4.conf.all.accept_source_route = 0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# net.ipv4.conf.lo.accept_source_route = 0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# net.ipv4.conf.eth0.accept_source_route = 0")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Controls the System Request debugging functionality of the kernel")]),s._v("\nkernel.sysrq "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Controls whether core dumps will append the PID to the core filename.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Useful for debugging multi-threaded applications.")]),s._v("\nkernel.core_uses_pid "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Increase maximum amount of memory allocated to shm")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Only uncomment if needed!")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kernel.shmmax = 67108864")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Disable ICMP Redirect Acceptance")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Default should work for all interfaces")]),s._v("\nnet.ipv4.conf.default.accept_redirects "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# net.ipv4.conf.all.accept_redirects = 0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# net.ipv4.conf.lo.accept_redirects = 0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# net.ipv4.conf.eth0.accept_redirects = 0")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# enable Log Spoofed Packets, Source Routed Packets, Redirect Packets")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Default should work for all interfaces")]),s._v("\nnet.ipv4.conf.default.log_martians "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# net.ipv4.conf.all.log_martians = 1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# net.ipv4.conf.lo.log_martians = 1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# net.ipv4.conf.eth0.log_martians = 1")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Decrease the time default value for tcp_fin_timeout connection")]),s._v("\nnet.ipv4.tcp_fin_timeout "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Decrease the time default value for tcp_keepalive_time connection")]),s._v("\nnet.ipv4.tcp_keepalive_time "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1200")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Turn on the tcp_window_scaling")]),s._v("\nnet.ipv4.tcp_window_scaling "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Turn on the tcp_sack")]),s._v("\nnet.ipv4.tcp_sack "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tcp_fack should be on because of sack")]),s._v("\nnet.ipv4.tcp_fack "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Turn on the tcp_timestamps")]),s._v("\nnet.ipv4.tcp_timestamps "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Enable TCP SYN Cookie Protection")]),s._v("\nnet.ipv4.tcp_syncookies "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Enable ignoring broadcasts request")]),s._v("\nnet.ipv4.icmp_echo_ignore_broadcasts "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Enable bad error message Protection")]),s._v("\nnet.ipv4.icmp_ignore_bogus_error_responses "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# make more local ports available")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# net.ipv4.ip_local_port_range = 1024 65000")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# set TCP Re-Ordering value in kernel to ‘5′")]),s._v("\nnet.ipv4.tcp_reordering "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Lower syn retry rates")]),s._v("\nnet.ipv4.tcp_synack_retries "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\nnet.ipv4.tcp_syn_retries "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Set Max SYN Backlog to ‘2048′")]),s._v("\nnet.ipv4.tcp_max_syn_backlog "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Various Settings")]),s._v("\nnet.core.netdev_max_backlog "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Increase the maximum number of skb-heads to be cached")]),s._v("\nnet.core.hot_list_length "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("256")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Increase the tcp-time-wait buckets pool size")]),s._v("\nnet.ipv4.tcp_max_tw_buckets "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("360000")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# This will increase the amount of memory available for socket input/output queues")]),s._v("\nnet.core.rmem_default "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("65535")]),s._v("\nnet.core.rmem_max "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8388608")]),s._v("\nnet.ipv4.tcp_rmem "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("87380")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8388608")]),s._v("\nnet.core.wmem_default "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("65535")]),s._v("\nnet.core.wmem_max "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8388608")]),s._v("\nnet.ipv4.tcp_wmem "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("65535")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8388608")]),s._v("\nnet.ipv4.tcp_mem "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8388608")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8388608")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8388608")]),s._v("\nnet.core.optmem_max "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("40960")]),s._v("\n")])])]),t("p",[s._v("如果希望屏蔽别人 ping 你的主机，则加入以下代码：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Disable ping requests")]),s._v("\nnet.ipv4.icmp_echo_ignore_all "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])])]),t("p",[s._v("编辑完成后，请执行以下命令使变动立即生效：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("/sbin/sysctl "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v("\n/sbin/sysctl "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-w")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("net.ipv4.route.flush")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);