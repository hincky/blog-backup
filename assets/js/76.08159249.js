(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{388:function(t,e,a){"use strict";a.r(e);var l=a(14),n=Object(l.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"crictl-命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#crictl-命令"}},[t._v("#")]),t._v(" crictl 命令")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/containerd/containerd/blob/main/docs/getting-started.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("github-install-containerd"),e("OutboundLink")],1),t._v(" "),e("a",{attrs:{href:"https://www.yangpiqiulaotou.cn/2021/05/10/Crictl%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/",target:"_blank",rel:"noopener noreferrer"}},[t._v("install crictl 1"),e("OutboundLink")],1),t._v(" "),e("a",{attrs:{href:"https://github.com/kubernetes-sigs/cri-tools/blob/master/docs/crictl.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("github文档"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"pod"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pod"}},[t._v("#")]),t._v(" pod")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("命令")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("crictl pods")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("打印pod清单")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("crictl pods --name nginx-65899c769f-wv2gp")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("名称打印 Pod 清单")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("crictl pods --label run=nginx")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("根据标签打印 Pod 清单")])])])]),t._v(" "),e("h2",{attrs:{id:"image-镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#image-镜像"}},[t._v("#")]),t._v(" image 镜像")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("命令")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("crictl images")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("打印所有镜像")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("crictl images nginx")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("根据仓库打印镜像清单")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("crictl pull busybox")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("拉取busybox镜像")])])])]),t._v(" "),e("h2",{attrs:{id:"container-容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#container-容器"}},[t._v("#")]),t._v(" container 容器")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("命令")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("crictl ps -a")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("打印所有容器清单")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("crictl ps")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("正在运行的容器清单")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("crictl exec -i -t 1f73f2d81bf98 ls")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("在运行的容器上执行ls命令")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("crictl exec -i -t 1f73f2d81bf98 bash")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("在运行的容器上执行bash命令")])])])]),t._v(" "),e("h2",{attrs:{id:"log-日志"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#log-日志"}},[t._v("#")]),t._v(" log 日志")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("命令")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("crictl logs 87d3992f84f74")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("获取容器的所有日志")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("crictl logs --tail=N 87d3992f84f74")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("获取最近的 N 行日志")])])])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" /etc/hosts "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("EOF\n127.0.0.1   "),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("hostname")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("\n10.0.20.6   master\n10.0.8.13   node2\n10.0.8.12   node1\n43.138.161.91   master\n43.138.197.127   node2\n43.138.215.165   node1\nEOF")]),t._v("\n\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" /etc/NetworkManager/conf.d/rke2-canal.conf "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("EOF\n[keyfile]\nunmanaged-devices=interface-name:cali*;interface-name:flannel*\nEOF")]),t._v("\n\nsystemctl reload NetworkManager\n\n")])])]),e("p",[t._v("cat >> /etc/hosts << EOF\n127.0.0.1   $(hostname)\n10.0.20.6   master\n10.0.8.13   node2\n10.0.8.12   node1\n43.138.161.91   master\n43.138.197.127   node2\n43.138.215.165   node1\nEOF")]),t._v(" "),e("p",[t._v("curl -LO https://dl.k8s.io/release/v1.22.13/bin/linux/amd64/kubectl")])])}),[],!1,null,null,null);e.default=n.exports}}]);