(window.webpackJsonp=window.webpackJsonp||[]).push([[599],{911:function(s,a,t){"use strict";t.r(a);var e=t(14),v=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"umask"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#umask"}},[s._v("#")]),s._v(" umask")]),s._v(" "),a("p",[s._v("显示或设置创建文件的权限掩码。")]),s._v(" "),a("h2",{attrs:{id:"概要"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#概要"}},[s._v("#")]),s._v(" 概要")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("umask")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-S"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),a("h2",{attrs:{id:"主要用途"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#主要用途"}},[s._v("#")]),s._v(" 主要用途")]),s._v(" "),a("ul",[a("li",[s._v("显示当前的文件权限掩码。")]),s._v(" "),a("li",[s._v("通过八进制数的方式设置创建文件的权限掩码。")]),s._v(" "),a("li",[s._v("通过符号组合的方式设置创建文件的权限掩码。")])]),s._v(" "),a("h2",{attrs:{id:"参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[s._v("#")]),s._v(" 参数")]),s._v(" "),a("p",[s._v("mode（可选）：八进制数或符号组合。")]),s._v(" "),a("h2",{attrs:{id:"选项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#选项"}},[s._v("#")]),s._v(" 选项")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("-p：当没有参数时指定该选项，执行产生的输出格式可复用为输入；\n-S：以符号组合的方式输出创建文件的权限掩码，不使用该选项时以八进制数的形式输出。\n")])])]),a("h2",{attrs:{id:"返回值"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#返回值"}},[s._v("#")]),s._v(" 返回值")]),s._v(" "),a("p",[s._v("返回状态为成功除非给出了非法选项或非法参数。")]),s._v(" "),a("h2",{attrs:{id:"例子"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#例子"}},[s._v("#")]),s._v(" 例子")]),s._v(" "),a("p",[a("em",[s._v("以下的例子均假设文件权限掩码为0022。")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 以八进制数的形式输出创建文件的权限掩码。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("umask")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行结果：")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("umask")]),s._v(" 0022\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 以符号组合的方式输出创建文件的权限掩码。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("umask")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-S")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行结果：")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("u")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rwx,g"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rx,o"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rx\n")])])]),a("blockquote",[a("p",[s._v("参考"),a("code",[s._v("man chmod")]),s._v("文档的"),a("code",[s._v("DESCRIPTION")]),s._v("段落得知：")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("u")]),s._v("符号代表当前用户。")]),s._v(" "),a("li",[a("code",[s._v("g")]),s._v("符号代表和当前用户在同一个组的用户，以下简称组用户。")]),s._v(" "),a("li",[a("code",[s._v("o")]),s._v("符号代表其他用户。")]),s._v(" "),a("li",[a("code",[s._v("a")]),s._v("符号代表所有用户。")]),s._v(" "),a("li",[a("code",[s._v("r")]),s._v("符号代表读权限以及八进制数"),a("code",[s._v("4")]),s._v("。")]),s._v(" "),a("li",[a("code",[s._v("w")]),s._v("符号代表写权限以及八进制数"),a("code",[s._v("2")]),s._v("。")]),s._v(" "),a("li",[a("code",[s._v("x")]),s._v("符号代表执行权限以及八进制数"),a("code",[s._v("1")]),s._v("。")]),s._v(" "),a("li",[a("code",[s._v("+")]),s._v("符号代表添加目标用户相应的权限。")]),s._v(" "),a("li",[a("code",[s._v("-")]),s._v("符号代表删除目标用户相应的权限。")]),s._v(" "),a("li",[a("code",[s._v("=")]),s._v("符号代表添加目标用户相应的权限，删除未提到的权限。")])])]),s._v(" "),a("p",[s._v("那么刚才以符号形式输出的结果"),a("code",[s._v("u=rwx,g=rx,o=rx")]),s._v("转化为八进制数等于"),a("code",[s._v("0755")]),s._v("；")]),s._v(" "),a("p",[s._v("用八进制数来设置同样的权限，"),a("code",[s._v("umask")]),s._v("需要额外的执行减法"),a("code",[s._v("0777 - 0755")]),s._v("即"),a("code",[s._v("0022")]),s._v("，而"),a("code",[s._v("chmod")]),s._v("不需要。")]),s._v(" "),a("p",[s._v("符号组合模式的添加、删除、赋值权限。")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加权限：")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 为组用户添加写权限。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("umask")]),s._v(" g+w\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除权限：")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除其他用户的写、执行权限")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("umask")]),s._v(" o-wx\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 赋值权限：")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 赋值全部用户所有权限，等价于umask u=rwx,g=rwx,o=rwx")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("umask")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("a")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rwx\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 清除其他用户的读、写、执行权限。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("umask")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("o")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n")])])]),a("p",[s._v("创建文件夹、文件（假设当前目录不存在）")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" test.sh\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看权限，发现执行权限的设置不起作用。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("stat")]),s._v(" test.sh\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建文件夹")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" newdir\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看权限，发现执行权限的设置可以起作用。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("stat")]),s._v(" newdir\n")])])]),a("h3",{attrs:{id:"注意"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注意"}},[s._v("#")]),s._v(" 注意")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("该命令是bash内建命令，相关的帮助信息请查看"),a("code",[s._v("help")]),s._v("命令。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("chmod")]),s._v("用于更改已有对象的权限，"),a("code",[s._v("umask")]),s._v("影响之后新建对象的权限。")])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("请谨慎使用该命令")]),s._v("，特别是不要取消当前用户的读取权限，那样会导致你在终端使用"),a("code",[s._v("TAB")]),s._v("键补全时报错。")])])])])}),[],!1,null,null,null);a.default=v.exports}}]);