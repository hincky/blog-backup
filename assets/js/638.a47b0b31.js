(window.webpackJsonp=window.webpackJsonp||[]).push([[638],{951:function(a,t,s){"use strict";s.r(t);var e=s(14),r=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"watch"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#watch"}},[a._v("#")]),a._v(" watch")]),a._v(" "),t("p",[a._v("可以将命令的输出结果输出到标准输出设备，多用于周期性执行命令/定时执行命令")]),a._v(" "),t("h2",{attrs:{id:"补充说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#补充说明"}},[a._v("#")]),a._v(" 补充说明")]),a._v(" "),t("p",[t("strong",[a._v("watch命令")]),a._v(" 以周期性的方式执行给定的指令，指令输出以全屏方式显示。watch是一个非常实用的命令，基本所有的Linux发行版都带有这个小工具，如同名字一样，watch可以帮你监测一个命令的运行结果，省得你一遍遍的手动运行。")]),a._v(" "),t("h3",{attrs:{id:"语法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[a._v("#")]),a._v(" 语法")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("watch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("选项"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("参数"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),t("h3",{attrs:{id:"选项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#选项"}},[a._v("#")]),a._v(" 选项")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 或--interval  watch缺省每2秒运行一下程序，可以用-n或-interval来指定间隔的时间。")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 或--differences  用-d或--differences 选项watch 会高亮显示变化的区域。 而-d=cumulative选项会把变动过的地方(不管最近的那次有没有变动)都高亮显示出来。")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 或-no-title  会关闭watch命令在顶部的时间间隔,命令，当前时间的输出。")]),a._v("\n-h, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--help")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看帮助文档")]),a._v("\n")])])]),t("h3",{attrs:{id:"参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[a._v("#")]),a._v(" 参数")]),a._v(" "),t("p",[a._v("指令：需要周期性执行的指令。")]),a._v(" "),t("h3",{attrs:{id:"实例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#实例"}},[a._v("#")]),a._v(" 实例")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("watch")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("netstat")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ant")]),a._v("       "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 命令：每隔一秒高亮显示网络链接数的变化情况")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("watch")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'pstree|grep http'")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 每隔一秒高亮显示http链接数的变化情况。 后面接的命令若带有管道符，需要加''将命令区域归整。")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("watch")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'netstat -an | grep:21 | \\ grep<模拟攻击客户机的IP>| wc -l'")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 实时查看模拟攻击客户机建立起来的连接数")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("watch")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'ls -l|grep scf'")]),a._v("       "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 监测当前目录中 scf' 的文件的变化")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("watch")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("10")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'cat /proc/loadavg'")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 10秒一次输出系统的平均负载")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("watch")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("uptime")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("watch")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("uptime")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("watch")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("netstat")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ntlp")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("watch")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'ls -l | fgrep goface'")]),a._v("     "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 监测goface的文件")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("watch")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-differences")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("cumulative "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("uptime")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("watch")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("60")]),a._v(" from            "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 监控mail")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("watch")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"df -i;df"')]),a._v("       "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 监测磁盘inode和block数目变化情况")]),a._v("\n")])])]),t("p",[a._v("FreeBSD和Linux下watch命令的不同，在Linux下，watch是周期性的执行下个程序，并全屏显示执行结果，如："),t("code",[a._v("watch -n 1 -d netstat -ant")]),a._v("，而在FreeBSD下的watch命令是查看其它用户的正在运行的操作，watch允许你偷看其它terminal正在做什么，该命令只能让超级用户使用。")])])}),[],!1,null,null,null);t.default=r.exports}}]);