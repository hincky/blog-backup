(window.webpackJsonp=window.webpackJsonp||[]).push([[531],{843:function(s,a,e){"use strict";e.r(a);var t=e(14),r=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"skill"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#skill"}},[s._v("#")]),s._v(" skill")]),s._v(" "),a("p",[s._v("向选定的进程发送信号冻结进程")]),s._v(" "),a("h2",{attrs:{id:"补充说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#补充说明"}},[s._v("#")]),s._v(" 补充说明")]),s._v(" "),a("p",[a("strong",[s._v("skill命令")]),s._v(" 用于向选定的进程发送信号，冻结进程。这个命令初学者并不常用，深入之后牵涉到系统服务优化之后可能会用到。")]),s._v(" "),a("h3",{attrs:{id:"语法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[s._v("#")]),s._v(" 语法")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("skill"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("选项"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("h3",{attrs:{id:"选项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#选项"}},[s._v("#")]),s._v(" 选项")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("-f：快速模式；\n-i：交互模式，每一步操作都需要确认；\n-v：冗余模式；\n-w：激活模式；\n-V：显示版本号；\n-t：指定开启进程的终端号；\n-u：指定开启进程的用户；\n-p：指定进程的id号；\n-c：指定开启进程的指令名称。\n")])])]),a("h3",{attrs:{id:"实例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实例"}},[s._v("#")]),s._v(" 实例")]),s._v(" "),a("p",[s._v("如果您发现了一个占用大量CPU和内存的进程，但又不想停止它，该怎么办？考虑下面的top命令输出：")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("top")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16514")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(":00:44  up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" days,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(":04,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" users,  load average: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.47")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.35")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.31")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" processes: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" sleeping, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" running, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" zombie, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" stopped\nCPU states:  cpu    user    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nice")]),s._v("  system    irq  softirq  iowait    idle\n           total    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("%    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.6")]),s._v("%    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.7")]),s._v("%   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.2")]),s._v("%     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("%   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("88.3")]),s._v("%    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("%\nMem:  1026912k av, 1010476k used,   16436k free,       0k shrd,   52128k buff\n                    766724k actv,  143128k in_d,   14264k in_c\nSwap: 2041192k av,   83160k used, 1958032k "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("free")]),s._v("                  799432k cached\n\n  PID "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v("     PRI  NI  SIZE  RSS SHARE "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("stat")]),s._v(" %CPU %MEM   "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),s._v(" CPU "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16514")]),s._v(" oracle    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("28796")]),s._v("  26M "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20252")]),s._v(" D N   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7.0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.5")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":03   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" oraclePRODB2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])])]),a("p",[s._v("既然您确认进程16514占用了大量内存，您就可以使用skill命令“冻结”它，而不是停止它。")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("skill "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-STOP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])])]),a("p",[s._v("之后，检查top输出：")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(":01:11  up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" days,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(":05,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" users,  load average: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.20")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.54")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.38")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" processes: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" sleeping, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" running, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" zombie, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" stopped\nCPU states:  cpu    user    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nice")]),s._v("  system    irq  softirq  iowait    idle\n           total    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.3")]),s._v("%    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("%    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.3")]),s._v("%   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("%     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("%    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.3")]),s._v("%   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("94.8")]),s._v("%\nMem:  1026912k av, 1008756k used,   18156k free,       0k shrd,    3976k buff\n                    770024k actv,  143496k in_d,   12876k in_c\nSwap: 2041192k av,   83152k used, 1958040k "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("free")]),s._v("                  851200k cached\n\n  PID "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v("     PRI  NI  SIZE  RSS SHARE STAT %CPU %MEM   TIME CPU COMMAND\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16514")]),s._v(" oracle    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("28796")]),s._v("  26M "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20252")]),s._v(" T N   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.5")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":04   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" oraclePRODB2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])])]),a("p",[s._v("现在，CPU 从 0% 空闲变为 94% 空闲。该进程被有效冻结。过一段时间之后，您可能希望唤醒该进程：")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("skill "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-CONT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16514")]),s._v("\n")])])]),a("p",[s._v("如果希望暂时冻结进程以便为完成更重要的进程腾出空间，该方法非常有用。")]),s._v(" "),a("p",[s._v('此命令用途很广。如果您要停止 "oracle" 用户的所有进程，只需要一个命令即可实现：')]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("skill "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-STOP")]),s._v(" oracle\n")])])]),a("p",[s._v("可以使用用户、PID、命令或终端 id 作为参数。以下命令可停止所有 rman 命令。")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("skill "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-STOP")]),s._v(" rman\n")])])]),a("p",[s._v('如您所见，skill 决定您输入的参数（进程 ID、用户 ID 或命令）并进行相应操作。这可能会导致在某些情况下出现这样的问题：您可能具有同名的用户和命令。最好的示例是 "oracle" 进程，通常由用户 "oracle" 运行。因此，当您希望停止名为 "oracle" 的进程时，可执行以下命令：')]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("skill "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-STOP")]),s._v(" oracle\n")])])]),a("p",[s._v('用户 "oracle" 的所有进程都停止，包括您可能要使用的会话。要非常明确地执行命令，您可以选择使用一个新参数指定参数的类型。要停止一个名为 oracle 的命令，可执行以下命令：')]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("skill "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-STOP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" oracle\n")])])]),a("p",[s._v("snice命令的功能与skill类似。但它用于降低进程的优先级，而不是停止进程。首先，检查 top 输出：")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("  PID "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v("     PRI  NI  SIZE  RSS SHARE STAT %CPU %MEM   TIME CPU COMMAND\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" root      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" RW    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" kapmd\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13680")]),s._v(" oracle    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11336")]),s._v("  10M  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8820")]),s._v(" T     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" oracle\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13683")]),s._v(" oracle    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9972")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9608")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7788")]),s._v(" T     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.9")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" oracle\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13686")]),s._v(" oracle    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9860")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9496")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7676")]),s._v(" T     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.9")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" oracle\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13689")]),s._v(" oracle    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10004")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9640")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7820")]),s._v(" T     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.9")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" oracle\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13695")]),s._v(" oracle    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9984")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9620")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7800")]),s._v(" T     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.9")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" oracle\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13698")]),s._v(" oracle    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10064")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9700")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7884")]),s._v(" T     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.9")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" oracle\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13701")]),s._v(" oracle    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22204")]),s._v("  21M "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16940")]),s._v(" T     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.1")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" oracle\n")])])]),a("p",[s._v('现在，将 "oracle" 进程的优先级降低四个点。注意，该值越高，优先级越低。')]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("snice +4 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-u")]),s._v(" oracle\n  PID "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v("     PRI  NI  SIZE  RSS SHARE STAT %CPU %MEM   TIME CPU COMMAND\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16894")]),s._v(" oracle    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("38904")]),s._v("  32M "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("26248")]),s._v(" D N   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.5")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.2")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":01   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" oracle\n")])])]),a("p",[s._v("注意，NI 列（nice 值）现在是 4，优先级现在设置为 20，而不是 15。这对于降低优先级非常有帮助。")])])}),[],!1,null,null,null);a.default=r.exports}}]);