(window.webpackJsonp=window.webpackJsonp||[]).push([[509],{821:function(s,a,t){"use strict";t.r(a);var e=t(14),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"script"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#script"}},[s._v("#")]),s._v(" script")]),s._v(" "),a("p",[s._v("记录终端会话的所有操作")]),s._v(" "),a("h2",{attrs:{id:"补充说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#补充说明"}},[s._v("#")]),s._v(" 补充说明")]),s._v(" "),a("p",[a("strong",[s._v("script")]),s._v(" 用于在终端会话中，记录用户的所有操作和命令的输出信息。简而言之，记录终端会话发生的一切信息，如同一台终端录像机。例如，用户在输入某条命令时，字符的键入和删除也都会被记录。用户在终端的所有操作、终端的回显等信息会被以 "),a("code",[s._v("raw")]),s._v(" 格式存储在日志文件，称为终端数据文件。命令的时间信息会被单独以另一种结构储存为日志文件，称为时间日志文件。使用命令"),a("code",[s._v("exit")]),s._v("或者快捷键"),a("code",[s._v("Ctrl + D")]),s._v("停止记录。")]),s._v(" "),a("h3",{attrs:{id:"语法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[s._v("#")]),s._v(" 语法")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("script"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("选项"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("参数"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("h3",{attrs:{id:"选项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#选项"}},[s._v("#")]),s._v(" 选项")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("-a, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--append")]),s._v("              "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 对终端会话的操作信息，以追加方式写入文件（保留原文件内容）")]),s._v("\n-c, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--command")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 只运行 command 命令而不打开交互终端。相当于开启 script ，执行 command ，再退出 script")]),s._v("\n                          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# command 可以是任意能够在终端会话执行的命令")]),s._v("\n-e, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--return")]),s._v("              "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回子进程的退出状态码")]),s._v("\n-f, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--flush")]),s._v("               "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 每次终端的内容发生变动，立马写入日志文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--force")]),s._v("                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 允许默认输出终端数据文件为符号链接")]),s._v("\n-o, --output-limit size   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 限制终端数据文件和时间日志文件的大小，当文件大小达到此限制就会退出子进程")]),s._v("\n                          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# size 的单位可以设置为：KiB(=1024)、KB(=1000)、MiB(1024*1024)、MB(=1000*1000)")]),s._v("\n                          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 同理还支持 GiB TiB PiB EiB ZiB YiB GB TB PB EB ZB YB")]),s._v("\n-q, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--quiet")]),s._v("               "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安静模式。启动和退出script命令不显示任何提示")]),s._v("\n-t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("file"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(", --timing"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("file"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出时间日志信息到标准错误(stderr)或者文件")]),s._v("\n-V, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--version")]),s._v("             "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示版本信息并退出")]),s._v("\n-h, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--help")]),s._v("                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示帮助文本并退出")]),s._v("\n")])])]),a("h3",{attrs:{id:"参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[s._v("#")]),s._v(" 参数")]),s._v(" "),a("ul",[a("li",[s._v("终端数据文件：设置存储终端数据信息的文件名称")])]),s._v(" "),a("h3",{attrs:{id:"实例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实例"}},[s._v("#")]),s._v(" 实例")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("script                             "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开启记录，默认会在当前目录创建名称为 typescript 的文件来保存终端数据文件")]),s._v("\nscript command.log                 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开启记录，在当前目录创建名称为 command.log 的文件来保存终端数据文件")]),s._v("\nscript "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),s._v("time.file command.log  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开启记录，在当前目录创建名称为 command.log 的文件来保存终端数据文件")]),s._v("\n                                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在当前目录创建名称为 time.file 的文件来保存时间日志文件")]),s._v("\n")])])]),a("p",[a("strong",[s._v("以追加模式记录终端信息")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("zfb@localhost:~$ script "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),s._v("time.file "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-a")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" command.log\nScript started, "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" is command.log\nzfb@localhost:~$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello, world"')]),s._v("\nhello, world\nzfb@localhost:~$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"+%Y-%m-%d %H:%M:%S"')]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-12-23 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":48:46\nzfb@localhost:~$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Bye"')]),s._v("\nBye\nzfb@localhost:~$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-al")]),s._v("\ntotal "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("\ndrwxr-xr-x  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" zfb zfb "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Dec "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":48 "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\ndrwxr-xr-x "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("37")]),s._v(" zfb zfb "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Dec "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":49 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n-rw-r--r--  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" zfb zfb    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Dec "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(":03 a.txt\n-rw-r--r--  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" zfb zfb   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" Dec "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(":04 b.txt\n-rw-r--r--  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" zfb zfb "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2744")]),s._v(" Dec "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":49 command.log\n-rw-r--r--  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" zfb zfb  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("790")]),s._v(" Dec "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":49 time.file\nzfb@localhost:~$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\nScript done, "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" is command.log\nzfb@localhost:~$\n")])])]),a("p",[s._v("然后，用户可以查看终端数据文件，使用方法如下")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("zfb@localhost:~$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" command.log\nScript started on "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-12-23 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":48:25+08:00 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("TERM")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xterm-256color"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("TTY")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/dev/pts/0"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("COLUMNS")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"75"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("LINES")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"30"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nzfb@localhost:~$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello, world"')]),s._v("\nhello, world\nzfb@localhost:~$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"+%Y-%m-%d %H:%M:%S"')]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-12-23 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":48:46\nzfb@localhost:~$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Bye"')]),s._v("\nBye\nzfb@localhost:~$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-al")]),s._v("\ntotal "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("\ndrwxr-xr-x  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" zfb zfb "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Dec "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":48 "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\ndrwxr-xr-x "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("37")]),s._v(" zfb zfb "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Dec "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":49 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n-rw-r--r--  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" zfb zfb    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Dec "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(":03 a.txt\n-rw-r--r--  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" zfb zfb   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" Dec "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(":04 b.txt\n-rw-r--r--  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" zfb zfb "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2744")]),s._v(" Dec "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":49 command.log\n-rw-r--r--  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" zfb zfb  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("790")]),s._v(" Dec "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":49 time.file\nzfb@localhost:~$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n\nScript "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v(" on "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-12-23 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":49:04+08:00 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("COMMAND_EXIT_CODE"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nzfb@localhost:~$\n")])])]),a("p",[s._v("其中，只有命令"),a("code",[s._v("cat command.log")]),s._v("是用户输入，其他均为自动呈现。通过查看上面输出的时间"),a("code",[s._v("2020-12-23 20:48:46")]),s._v("，可以证明，这是重现的记录，而非重新执行一遍命令。也就是说，可以把"),a("code",[s._v("time.file")]),s._v("和"),a("code",[s._v("command.log")]),s._v("文件移动到任意一台机器上，都可以重现命令输入与终端回显。")]),s._v(" "),a("p",[a("strong",[s._v("记录服务器用户会话操作")])]),s._v(" "),a("p",[s._v("以"),a("code",[s._v("root")]),s._v("身份编辑文件"),a("code",[s._v("/etc/profile")]),s._v("，在文件末尾追加以下内容")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$UID")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ge")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" /usr/bin/script "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),s._v("/var/log/script-records/"),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$USER")]),s._v("-"),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$UID")]),s._v("-"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" +%Y%m%d"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(".time "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-a")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-q")]),s._v(" /var/log/script-records/"),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$USER")]),s._v("-"),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$UID")]),s._v("-"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" +%Y%m%d"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(".log\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n")])])]),a("p",[s._v("然后再以"),a("code",[s._v("root")]),s._v("身份创建文件夹用于存储服务器上的各个用户在终端的所有操作信息")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" /var/log/script-records/\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("733")]),s._v(" /var/log/script-records/\n")])])]),a("p",[s._v("最后，执行命令"),a("code",[s._v("source /etc/profile")]),s._v("即可。任意用户（"),a("code",[s._v("UID ≥ 0")]),s._v("）在终端执行的所有操作都会被安静地记录下来，以天为单位存储。")])])}),[],!1,null,null,null);a.default=r.exports}}]);