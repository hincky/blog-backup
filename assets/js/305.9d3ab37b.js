(window.webpackJsonp=window.webpackJsonp||[]).push([[305],{620:function(a,e,s){"use strict";s.r(e);var t=s(14),r=Object(t.a)({},(function(){var a=this,e=a._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"ip6tables"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ip6tables"}},[a._v("#")]),a._v(" ip6tables")]),a._v(" "),e("p",[a._v("linux中防火墙软件")]),a._v(" "),e("h2",{attrs:{id:"补充说明"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#补充说明"}},[a._v("#")]),a._v(" 补充说明")]),a._v(" "),e("p",[e("strong",[a._v("ip6tables命令")]),a._v(" 和iptables一样，都是linux中防火墙软件，不同的是ip6tables采用的TCP/ip协议为IPv6。")]),a._v(" "),e("h3",{attrs:{id:"语法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[a._v("#")]),a._v(" 语法")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("ip6tables"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("选项"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),e("h3",{attrs:{id:"选项"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#选项"}},[a._v("#")]),a._v(" 选项")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("-t"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("表"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("：指定要操纵的表；\n-A：向规则链中添加条目；\n-D：从规则链中删除条目；\n-i：向规则链中插入条目；\n-R：替换规则链中的条目；\n-L：显示规则链中已有的条目；\n-F：清楚规则链中已有的条目；\n-Z：清空规则链中的数据包计算器和字节计数器；\n-N：创建新的用户自定义规则链；\n-P：定义规则链中的默认目标；\n-h：显示帮助信息；\n-p：指定要匹配的数据包协议类型；\n-s：指定要匹配的数据包源ip地址；\n-j"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("目标"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("：指定要跳转的目标；\n-i"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("网络接口"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("：指定数据包进入本机的网络接口；\n-o"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("网络接口"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("：指定数据包要离开本机所使用的网络接口。\n-c"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("计数器"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("：在执行插入操作（insert），追加操作（append），替换操作（replace）时初始化包计数器和字节计数器。\n")])])]),e("h3",{attrs:{id:"实例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#实例"}},[a._v("#")]),a._v(" 实例")]),a._v(" "),e("p",[a._v("在命令行窗口输入下面的指令就可以查看当前的 IPv6 防火墙配置：")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("ip6tables "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-nl")]),a._v(" --line-numbers\n")])])]),e("p",[e("strong",[a._v("/etc/sysconfig/ip6tables文件")])]),a._v(" "),e("p",[a._v("使用编辑器编辑"),e("code",[a._v("/etc/sysconfig/ip6tables")]),a._v("文件：")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" /etc/sysconfig/ip6tables\n")])])]),e("p",[a._v("可能会看到下面的默认 ip6tables 规则：")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("*filter\n:INPUT accept "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(":0"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n:FORWARD ACCEPT "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(":0"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n:OUTPUT ACCEPT "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(":0"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n:RH-Firewall-1-INPUT - "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(":0"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" INPUT "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" RH-Firewall-1-INPUT\n"),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" FORWARD "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" RH-Firewall-1-INPUT\n"),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" RH-Firewall-1-INPUT "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" lo "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n"),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" RH-Firewall-1-INPUT "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" icmpv6 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n"),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" RH-Firewall-1-INPUT "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("50")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n"),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" RH-Firewall-1-INPUT "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("51")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n"),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" RH-Firewall-1-INPUT "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" udp "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--dport")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("5353")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" ff02::fb "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n"),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" RH-Firewall-1-INPUT "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" udp "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" udp "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--dport")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("631")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n"),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" RH-Firewall-1-INPUT "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" tcp "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" tcp "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--dport")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("631")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n"),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" RH-Firewall-1-INPUT "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" udp "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" udp "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--dport")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("32768")]),a._v(":61000 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n"),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" RH-Firewall-1-INPUT "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" tcp "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" tcp "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--dport")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("32768")]),a._v(":61000 "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--syn")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n"),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" RH-Firewall-1-INPUT "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" tcp "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" tcp "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--dport")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("22")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n"),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" RH-Firewall-1-INPUT "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" reject --reject-with icmp6-adm-prohibited\nCOMMIT\n")])])]),e("p",[a._v("与 IPv4 的 iptables 规则类似，但又不完全相同。")]),a._v(" "),e("p",[a._v("要开启 80 端口（HTTP 服务器端口），在 COMMIT 一行之前添加如下规则：")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" RH-Firewall-1-INPUT "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" tcp "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" tcp "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--dport")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("80")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n")])])]),e("p",[e("code",[a._v("-p tcp")]),a._v("表示仅针对 tcp 协议的通信。"),e("code",[a._v("--dport")]),a._v("指定端口号。")]),a._v(" "),e("p",[a._v("要开启 53 端口（DNS 服务器端口），在 COMMIT 一行之前添加如下规则：")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" RH-Firewall-1-INPUT "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" tcp "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" tcp "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--dport")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("53")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n"),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" RH-Firewall-1-INPUT "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" udp "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" tcp "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--dport")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("53")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n")])])]),e("p",[a._v("同时针对 tcp 和 udp 协议开启 53 端口。")]),a._v(" "),e("p",[a._v("要开启 443 端口，在 COMMIT 一行之前添加如下规则：")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" RH-Firewall-1-INPUT "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" tcp "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" tcp "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--dport")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("443")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n")])])]),e("p",[a._v("要开启 25 端口（SMTP 邮件服务器端口），在 COMMIT 一行之前添加如下规则：")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" RH-Firewall-1-INPUT "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" tcp "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" tcp "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--dport")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("25")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n")])])]),e("p",[a._v("对于那些没有特定规则与之匹配的数据包，可能是我们不想要的，多半是有问题的。我们可能也希望在丢弃（DROP）之前记录它们。此时，可以将最后一行：")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" RH-Firewall-1-INPUT "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" REJECT --reject-with icmp6-adm-prohibited\nCOMMIT\n")])])]),e("p",[a._v("改为：")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" RH-Firewall-1-INPUT "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" LOG\n"),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" RH-Firewall-1-INPUT "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" DROP\nCOMMIT\n")])])]),e("p",[a._v("保存并关闭该文件。然后重新启动 ip6tables 防火墙：")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# service ip6tables restart")]),a._v("\n")])])]),e("p",[a._v("然后重新查看 ip6tables 规则，可以看到如下所示的输出：")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ip6tables -vnL --line-numbers")]),a._v("\n")])])]),e("p",[a._v("输出示例：")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("Chain INPUT "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("policy ACCEPT "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" packets, "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" bytes"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\nnum   pkts bytes target     prot opt "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v("     out     "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("source")]),a._v("               destination\n"),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("    "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("42237")]),a._v(" 3243K RH-Firewall-1-INPUT  all      *      *       ::/0                 ::/0\nChain FORWARD "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("policy ACCEPT "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" packets, "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" bytes"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\nnum   pkts bytes target     prot opt "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v("     out     "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("source")]),a._v("               destination\n"),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("        "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("     "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" RH-Firewall-1-INPUT  all      *      *       ::/0                 ::/0\nChain OUTPUT "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("policy ACCEPT "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("12557")]),a._v(" packets, 2042K bytes"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\nnum   pkts bytes target     prot opt "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v("     out     "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("source")]),a._v("               destination\nChain RH-Firewall-1-INPUT "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(" references"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\nnum   pkts bytes target     prot opt "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v("     out     "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("source")]),a._v("               destination\n"),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("        "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("6")]),a._v("   "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("656")]),a._v(" ACCEPT     all      lo     *       ::/0                 ::/0\n"),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("    "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("37519")]),a._v(" 2730K ACCEPT     icmpv6    *      *       ::/0                 ::/0\n"),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v("        "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("     "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" ACCEPT     esp      *      *       ::/0                 ::/0\n"),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("4")]),a._v("        "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("     "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" ACCEPT     ah       *      *       ::/0                 ::/0\n"),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("5")]),a._v("      "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("413")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("48385")]),a._v(" ACCEPT     udp      *      *       ::/0                 ff02::fb/128       udp dpt:5353\n"),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("6")]),a._v("        "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("     "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" ACCEPT     udp      *      *       ::/0                 ::/0               udp dpt:631\n"),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("7")]),a._v("        "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("     "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" ACCEPT     tcp      *      *       ::/0                 ::/0               tcp dpt:631\n"),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("8")]),a._v("      "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("173")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("79521")]),a._v(" ACCEPT     udp      *      *       ::/0                 ::/0               udp dpts:32768:61000\n"),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("9")]),a._v("        "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("     "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" ACCEPT     tcp      *      *       ::/0                 ::/0               tcp dpts:32768:61000 flags:"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v("0x16/0x02\n"),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("10")]),a._v("       "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("     "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" ACCEPT     tcp      *      *       ::/0                 ::/0               tcp dpt:22\n"),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("11")]),a._v("       "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("     "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" ACCEPT     tcp      *      *       ::/0                 ::/0               tcp dpt:80\n"),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("12")]),a._v("       "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("     "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" ACCEPT     tcp      *      *       ::/0                 ::/0               tcp dpt:53\n"),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("13")]),a._v("    "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("4108")]),a._v("  380K ACCEPT     udp      *      *       ::/0                 ::/0               udp dpt:53\n"),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("14")]),a._v("      "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("18")]),a._v("  "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("4196")]),a._v(" REJECT     all      *      *       ::/0                 ::/0\n")])])]),e("p",[e("strong",[a._v("IPv6 私有 IP")])]),a._v(" "),e("p",[a._v("IPv4 通常默认即可保护内部局域网私有 IP 上的主机。但是 IPv6 的地址非常丰富，不再需要使用类似 NAT 等协议的私有网络。这样一来，所有的内部主机都可以拥有公网 IP 而直接连接到互联网，也就同时暴露于互联网上的各种威胁之中了。那么，如何配置 IPv6 防火墙使其默认将除了 ping6 请求之外的所有输入数据包都丢弃呢？可以使用FC00::/7 前缀来标识本地 IPv6 单播地址。")]),a._v(" "),e("p",[e("strong",[a._v("允许特定的 ICMPv6 通信")])]),a._v(" "),e("p",[a._v("使用 IPv6 的时候需要允许比 IPv4 更多类型的 ICMP 通信以保证路由和 IP 地址自动配置等功能正常工作。有时候，如果你的规则设置太过苛刻，可能都无法分配到正确的 IPv6 地址。当然，不使用 DHCP 而是手动配置 IP 地址的除外。")]),a._v(" "),e("p",[a._v("下面是一些比较常见的 ipv6-icmp 配置实例：")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v(":ICMPv6 - "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(":0"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Approve certain ICMPv6 types and all outgoing ICMPv6")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# http://forum.linode.com/viewtopic.php?p=39840#39840")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" INPUT "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" icmpv6 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ICMPv6\n"),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" ICMPv6 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" icmpv6 --icmpv6-type echo-request "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n"),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" ICMPv6 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" icmpv6 --icmpv6-type destination-unreachable "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n"),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" ICMPv6 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" icmpv6 --icmpv6-type packet-too-big "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n"),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" ICMPv6 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" icmpv6 --icmpv6-type time-exceeded "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n"),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" ICMPv6 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" icmpv6 --icmpv6-type parameter-problem "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n"),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" ICMPv6 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" icmpv6 --icmpv6-type router-solicitation "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n"),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" ICMPv6 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" icmpv6 --icmpv6-type router-advertisement "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n"),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" ICMPv6 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" icmpv6 --icmpv6-type neighbour-solicitation "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n"),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" ICMPv6 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" icmpv6 --icmpv6-type neighbour-advertisement "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n"),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" ICMPv6 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" icmpv6 --icmpv6-type redirect "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n"),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" ICMPv6 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" icmpv6 --icmpv6-type "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("141")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n"),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" ICMPv6 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" icmpv6 --icmpv6-type "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("142")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n"),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" ICMPv6 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" icmpv6 --icmpv6-type "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("148")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n"),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" ICMPv6 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" icmpv6 --icmpv6-type "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("149")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n"),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" ICMPv6 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" icmpv6 --icmpv6-type "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("130")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" fe80::/10 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n"),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" ICMPv6 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" icmpv6 --icmpv6-type "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("131")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" fe80::/10 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n"),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" ICMPv6 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" icmpv6 --icmpv6-type "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("132")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" fe80::/10 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n"),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" ICMPv6 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" icmpv6 --icmpv6-type "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("143")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" fe80::/10 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n"),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" ICMPv6 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" icmpv6 --icmpv6-type "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("151")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" fe80::/10 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n"),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" ICMPv6 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" icmpv6 --icmpv6-type "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("152")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" fe80::/10 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n"),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" ICMPv6 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" icmpv6 --icmpv6-type "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("153")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" fe80::/10 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n"),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" ICMPv6 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" RETURN\n"),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" OUTPUT "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" icmpv6 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n")])])])])}),[],!1,null,null,null);e.default=r.exports}}]);