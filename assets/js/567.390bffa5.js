(window.webpackJsonp=window.webpackJsonp||[]).push([[567],{880:function(t,s,e){"use strict";e.r(s);var a=e(14),v=Object(a.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"systemctl"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#systemctl"}},[t._v("#")]),t._v(" systemctl")]),t._v(" "),s("p",[t._v("系统服务管理器指令")]),t._v(" "),s("h2",{attrs:{id:"补充说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#补充说明"}},[t._v("#")]),t._v(" 补充说明")]),t._v(" "),s("p",[s("strong",[t._v("systemctl命令")]),t._v(" 是系统服务管理器指令，它实际上将 service 和 chkconfig 这两个命令组合到一起。")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("任务")]),t._v(" "),s("th",[t._v("旧指令")]),t._v(" "),s("th",[t._v("新指令")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("使某服务自动启动")]),t._v(" "),s("td",[t._v("chkconfig --level 3 httpd on")]),t._v(" "),s("td",[t._v("systemctl enable httpd.service")])]),t._v(" "),s("tr",[s("td",[t._v("使某服务不自动启动")]),t._v(" "),s("td",[t._v("chkconfig --level 3 httpd off")]),t._v(" "),s("td",[t._v("systemctl disable httpd.service")])]),t._v(" "),s("tr",[s("td",[t._v("检查服务状态")]),t._v(" "),s("td",[t._v("service httpd status")]),t._v(" "),s("td",[t._v("systemctl status httpd.service （服务详细信息） systemctl is-active httpd.service （仅显示是否 Active)")])]),t._v(" "),s("tr",[s("td",[t._v("显示所有已启动的服务")]),t._v(" "),s("td",[t._v("chkconfig --list")]),t._v(" "),s("td",[t._v("systemctl list-units --type=service")])]),t._v(" "),s("tr",[s("td",[t._v("启动服务")]),t._v(" "),s("td",[t._v("service httpd start")]),t._v(" "),s("td",[t._v("systemctl start httpd.service")])]),t._v(" "),s("tr",[s("td",[t._v("停止服务")]),t._v(" "),s("td",[t._v("service httpd stop")]),t._v(" "),s("td",[t._v("systemctl stop httpd.service")])]),t._v(" "),s("tr",[s("td",[t._v("重启服务")]),t._v(" "),s("td",[t._v("service httpd restart")]),t._v(" "),s("td",[t._v("systemctl restart httpd.service")])]),t._v(" "),s("tr",[s("td",[t._v("重载服务")]),t._v(" "),s("td",[t._v("service httpd reload")]),t._v(" "),s("td",[t._v("systemctl reload httpd.service")])])])]),t._v(" "),s("h3",{attrs:{id:"实例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实例"}},[t._v("#")]),t._v(" 实例")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("systemctl start nfs-server.service "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 启动nfs服务")]),t._v("\nsystemctl "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v(" nfs-server.service "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置开机自启动")]),t._v("\nsystemctl disable nfs-server.service "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 停止开机自启动")]),t._v("\nsystemctl status nfs-server.service "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看服务当前状态")]),t._v("\nsystemctl restart nfs-server.service "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 重新启动某服务")]),t._v("\nsystemctl list-units "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--type")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("service "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看所有已启动的服务")]),t._v("\n")])])]),s("p",[t._v("开启防火墙22端口")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("iptables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-I")]),t._v(" INPUT "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p")]),t._v(" tcp "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--dport")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-j")]),t._v(" accept\n")])])]),s("p",[t._v("如果仍然有问题，就可能是SELinux导致的")]),t._v(" "),s("p",[t._v("关闭SElinux：")]),t._v(" "),s("p",[t._v("修改"),s("code",[t._v("/etc/selinux/config")]),t._v("文件中的"),s("code",[t._v('SELINUX=""')]),t._v("为disabled，然后重启。")]),t._v(" "),s("p",[t._v("彻底关闭防火墙：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" systemctl status firewalld.service\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" systemctl stop firewalld.service          \n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" systemctl disable firewalld.service\n")])])])])}),[],!1,null,null,null);s.default=v.exports}}]);